# vulnerability-identification
Agent Vulnerability Identification Service

# Pre-commit checking
Run the following command
```
make run-pre-commit
```

If you'd instead rather pre-commit checking happen automatically, you can run
the following:
```
make pre-commit
```

Now, any time you make a commit, the checks will run. Do note that the first
check will be slow as dependencies are installed.

# Initial Setup
Ensure that you have protobuf installed on your local machine:
```
brew install protobuf
```

Create .env files for the micro services (use .env.sample as a template)
```
cp detection-service/.env.sample dectection-service/.env
cp nvd_ingestion_service/.env.sample nvd_ingestion_service/.env
```

# Initialize submodules
1. `git submodule init`
2. `git submodule update`

# Generate protobuf types
Before the detection_service will run, you'll need to generate protbuf types:
```
cd ./kandji-types
make install
cd ..
make protobuf-build`
```

Make sure you have docker-compose installed and docker desktop is running
1. `make up`
2. `make init-db`

`make down` can be used to stop the containers

`make psql` allows you to access your dockerized database using psql

# Migrations
Migrations can be done by:
```
make generate-migrations m="<Message here>"
make run-migrations
```

https://alembic.sqlalchemy.org/en/latest/tutorial.html
