"""CPE Ingestion changes

Revision ID: 9de5b7b3768e
Revises: 753a4b62a33e
Create Date: 2022-06-22 17:02:55.625730

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '9de5b7b3768e'
down_revision = '753a4b62a33e'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('app_bundles', sa.Column('verified', sa.Boolean(), nullable=True))
    op.add_column('cpes', sa.Column('cpe_version_prefix', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('part', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('vendor', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('product', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('version', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('update', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('edition', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('language', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('software_edition', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('target_software', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('target_hardware', sa.String(), server_default='', nullable=False))
    op.add_column('cpes', sa.Column('other', sa.String(), server_default='', nullable=False))
    op.create_index('cpes_vendor_product_version_index', 'cpes', ['vendor', 'product', 'version'], unique=False)
    op.add_column('device_app_info', sa.Column('path', sa.String(), server_default='', nullable=False))
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('device_app_info', 'path')
    op.drop_index('cpes_vendor_product_version_index', table_name='cpes')
    op.drop_column('cpes', 'other')
    op.drop_column('cpes', 'target_hardware')
    op.drop_column('cpes', 'target_software')
    op.drop_column('cpes', 'software_edition')
    op.drop_column('cpes', 'language')
    op.drop_column('cpes', 'edition')
    op.drop_column('cpes', 'update')
    op.drop_column('cpes', 'version')
    op.drop_column('cpes', 'product')
    op.drop_column('cpes', 'vendor')
    op.drop_column('cpes', 'part')
    op.drop_column('cpes', 'cpe_version_prefix')
    op.drop_column('app_bundles', 'verified')
    # ### end Alembic commands ###
